<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Sets argument checking on/off "semi-globally" — set_check • dreamerr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Sets argument checking on/off " semi-globally set_check><meta property="og:description" content="You can allow your users to turn off argument checking within your function by using set_check. Only the functions check_arg nd check_value can be turned off that way."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dreamerr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/dreamerr_introduction.html">dreamerr: Error Handling Made Easy</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/lrberge/dreamerr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sets argument checking on/off "semi-globally"</h1>
    <small class="dont-index">Source: <a href="https://github.com/lrberge/dreamerr/blob/HEAD/R/stop.R" class="external-link"><code>R/stop.R</code></a></small>
    <div class="hidden name"><code>set_check.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>You can allow your users to turn off argument checking within your function by using <code>set_check</code>. Only the functions <code><a href="check_arg.html">check_arg</a></code> nd <code><a href="check_arg.html">check_value</a></code> can be turned off that way.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">set_check</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A logical scalar, no default.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function can be useful if you develop a function that may be used in large range loops (&gt;100K). In such situations, it may be good to still check all arguments, but to offer the user to turn this checking off with an extra argument (named <code>arg.check</code> for instance). Doing so you would achieve the feat of i) having a user-friendly function thanks to argument checking and, ii) still achieve high performance in large loops (although the computational footprint of argument checking is quite low (around 30 micro seconds for missing arguments to 80 micro seconds for non-missing arguments of simple type)).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let's give an example</span></span></span>
<span class="r-in"><span><span class="va">test_check</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">arg.check</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">set_check</span><span class="op">(</span><span class="va">arg.check</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="check_arg.html">check_arg</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="st">"numeric scalar"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Works: argument checking on</span></span></span>
<span class="r-in"><span><span class="fu">test_check</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If mistake, nice error msg</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">test_check</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"a"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : the full stack is shown (set this off with setDreamerr_show_stack(FALSE))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [01] tryCatch(withCallingHandlers({</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [02] tryCatchList(expr, classes, parentenv, handlers)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [03] tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]), names[nh], parentenv, handlers...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [04] doTryCatch(return(expr), name, parentenv, handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [05] tryCatchList(expr, names[-nh], parentenv, handlers[-nh])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [06] tryCatchOne(expr, names, parentenv, handlers[[1L]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [07] doTryCatch(return(expr), name, parentenv, handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [08] withCallingHandlers({</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [09] saveRDS(do.call(do.call, c(readRDS("C:\\Users\\berge028\\AppData\\Local\\Temp\\RtmpyexTgx\\callr-fun...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] do.call(do.call, c(readRDS("C:\\Users\\berge028\\AppData\\Local\\Temp\\RtmpyexTgx\\callr-fun-3c04235...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] (function (what, args, quote = FALSE, envir = parent.frame()) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [12] (function (..., cli_colors, pkgdown_internet) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] pkgdown::build_site(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [14] build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run, seed = seed, lazy = la...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15] build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run, seed = seed, ove...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy, examples_env = examples_env, run_d...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] map_("list", .x, .f, ..., .progress = .progress)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [18] with_indexed_errors(i = i, names = names, error_call = .purrr_error_call, call_with_cleanup(map_impl...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] withCallingHandlers(expr, error = function(cnd) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [20] call_with_cleanup(map_impl, environment(), .type, .progress, n, names, i)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21] .f(.x[[i]], ...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [22] withCallingHandlers(data_reference_topic(topic, pkg, examples_env = examples_env, run_dont_run = run...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [23] data_reference_topic(topic, pkg, examples_env = examples_env, run_dont_run = run_dont_run)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [24] run_examples(tags$tag_examples[[1]], env = if (is.null(examples_env)) NULL else new.env(parent = exa...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] highlight_examples(code, topic, env = env)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26] downlit::evaluate_and_highlight(code, fig_save = fig_save_topic, env = child_env(env), output_handle...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [27] evaluate::evaluate(code, child_env(env), new_device = TRUE, output_handler = output_handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [28] evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos, debug = debug, last = i == leng...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [29] timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval_with_user_handlers(expr, envir, enclos, ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [30] handle(ev &lt;- withCallingHandlers(withVisible(eval_with_user_handlers(expr, envir, enclos, user_handl...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] try(f, silent = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [32] tryCatch(expr, error = function(e) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [33] tryCatchList(expr, classes, parentenv, handlers)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [34] tryCatchOne(expr, names, parentenv, handlers[[1L]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [35] doTryCatch(return(expr), name, parentenv, handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [36] withCallingHandlers(withVisible(eval_with_user_handlers(expr, envir, enclos, user_handlers)), warnin...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [37] withVisible(eval_with_user_handlers(expr, envir, enclos, user_handlers))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [38] eval_with_user_handlers(expr, envir, enclos, user_handlers)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [39] eval(expr, envir, enclos)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [40] eval(expr, envir, enclos)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41] try(test_check(1, "a"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [42] tryCatch(expr, error = function(e) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [43] tryCatchList(expr, classes, parentenv, handlers)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [44] tryCatchOne(expr, names, parentenv, handlers[[1L]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [45] doTryCatch(return(expr), name, parentenv, handler)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [46] test_check(1, "a")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [47] check_arg(x, y, "numeric scalar")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [48] check_arg_core(.x = .x, .type = .type, .x1 = .x1, .x2 = .x2, .x3 = .x3, .x4 = .x4, .x5 = .x5, .x6 = ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49] send_error(all_reasons, x_name = x_names[qui], type, .message, .choices, .up, .value = .value, .data...:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Argument `y` must be a numeric scalar.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PROBLEM: it is not numeric (instead it is of type 'character').</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now argument checking turned off</span></span></span>
<span class="r-in"><span><span class="fu">test_check</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-in"><span><span class="co"># But if mistake: "not nice" error message</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">test_check</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"a"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in x + y : non-numeric argument to binary operator</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Laurent Berge.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

